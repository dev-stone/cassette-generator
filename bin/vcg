#!/usr/bin/env php
<?php

use Vcg\Core\Vcg;

require 'vendor/autoload.php';

if (1 === $argc) {
    echo 'Please provide configuration file path!' . PHP_EOL;
    return 1;
}

$configPath = $argv[1];

if (!file_exists($configPath) || !is_file($configPath)) {
    echo 'Configuration file not exist!' . PHP_EOL;
    return 1;
}
if (empty(file_get_contents($configPath))) {
    echo 'Configuration file empty!' . PHP_EOL;
    return 1;
}

try {
    (new Vcg($configPath))->run();
} catch (Exception $exception) {
    echo $exception->getMessage() . PHP_EOL;
    return 1;
}

echo 'Success.' . PHP_EOL;

return 0;